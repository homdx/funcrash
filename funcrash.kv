#:kivy 1.10.0

<Road>:
    nb_pistes: 5
    hauteur_piste: self.hauteur / self.nb_pistes
    longueur: self.width
    canvas.before:
        Color:
            rgba: 1, 1, 1, 0.3
        Rectangle:
            pos: self.pos
            size: self.size
    # Image:
    #     source: 'images/road01.png'
    #     allow_stretch: True
    #     pos: 0, 0
    #     size: root.height, root.width

<Car>:
    size: image.size
    pos: image.width / 2, self.y
    road: app.road
    Image:
        id: image
        source: 'images/car02.png'
        pos: root.pos
        size: root.road.hauteur_piste * self.image_ratio, root.road.hauteur_piste-1

<Tomato>:
    size: image.size
    pos: self.x, self.y
    Image:
        id: image
        source: 'images/tomato01.png'
        pos: root.pos
        size: (root.road.hauteur_piste / 2) * self.image_ratio, root.road.hauteur_piste / 2

<Game>:
    road: road1
    car: car1
    tempo: 0.5
    Road:
        id: road1
        size: root.size
        hauteur: root.height
        longueur: root.width
        speed: 0.03 * car1.width / root.tempo
        Car:
            id: car1
            road: road1
    Label:
        pos: 20, 0
        font_size: "30sp"
        text: str(int(root.score))
    Label:
        pos: 20, 40
        font_size: "30sp"
        color: 1,0.5,0,1
        text: str(int(root.high_score))

<Question>:
    title: self.titre
    size_hint: .5, .2
    auto_dismiss: False
    reponse: input.text
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: root.question
        TextInput:
            id: input
            text: root.proposition
            height: 20
            multiline: False
        Button:
            text: 'OK'
            on_press: root.ok()
